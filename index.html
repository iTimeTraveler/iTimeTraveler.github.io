<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iTimeTraveler</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="Someone knock at the door.">
<meta property="og:type" content="website">
<meta property="og:title" content="iTimeTraveler">
<meta property="og:url" content="http://github.com/index.html">
<meta property="og:site_name" content="iTimeTraveler">
<meta property="og:description" content="Someone knock at the door.">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iTimeTraveler">
<meta name="twitter:description" content="Someone knock at the door.">
  
    <link rel="alternate" href="/atom.xml" title="iTimeTraveler" type="application/atom+xml">
  

  

  <link rel="icon" href="/gallery/avatar/0.jpg">
  <link rel="apple-touch-icon" href="/gallery/avatar/0.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="css/style.css">

  <script src="js/jquery-3.1.1.min.js"></script>
  <script src="js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/home.css" >
  

  

  

  
  
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

</head>



  <body>


  
    <header id="header">

	<!-- èƒŒæ™¯å›¾æ¨¡å¼ -->
	

    
      <div id="intrologo" class="intro-logo" style="background-position:center; background-repeat:no-repeat; background-image: url(); background-size: auto 100%;">

      <!-- Support rolling -->  
        
        <section class="awSlider">
          <div class="carousel slide carousel-fade " data-ride="carousel">

            <!-- Wrapper for slides -->
            <div class="carousel-inner">
               
                  
                    <div class="item active">
                  
                    <img id="carousel-img0" src="https://source.unsplash.com/collection/954550/1920x1080">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img0 = new Image();
                      var imageTag0 = document.getElementById("carousel-img0");
                      img0.src = imageTag0.src;
                      img0.onload=function(){
                        if (img0.width / img0.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag0.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag0.style.height = document.body.clientHeight + "px";
                          imageTag0.style.marginLeft = -(document.body.clientHeight * img0.width / img0.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img1" src="https://source.unsplash.com/collection/954550/1920x1081">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img1 = new Image();
                      var imageTag1 = document.getElementById("carousel-img1");
                      img1.src = imageTag1.src;
                      img1.onload=function(){
                        if (img1.width / img1.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag1.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag1.style.height = document.body.clientHeight + "px";
                          imageTag1.style.marginLeft = -(document.body.clientHeight * img1.width / img1.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img2" src="https://source.unsplash.com/collection/954550/1921x1080">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img2 = new Image();
                      var imageTag2 = document.getElementById("carousel-img2");
                      img2.src = imageTag2.src;
                      img2.onload=function(){
                        if (img2.width / img2.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag2.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag2.style.height = document.body.clientHeight + "px";
                          imageTag2.style.marginLeft = -(document.body.clientHeight * img2.width / img2.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img3" src="https://source.unsplash.com/collection/954550/1921x1081">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img3 = new Image();
                      var imageTag3 = document.getElementById("carousel-img3");
                      img3.src = imageTag3.src;
                      img3.onload=function(){
                        if (img3.width / img3.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag3.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag3.style.height = document.body.clientHeight + "px";
                          imageTag3.style.marginLeft = -(document.body.clientHeight * img3.width / img3.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img4" src="https://source.unsplash.com/collection/954550/1920x1082">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img4 = new Image();
                      var imageTag4 = document.getElementById("carousel-img4");
                      img4.src = imageTag4.src;
                      img4.onload=function(){
                        if (img4.width / img4.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag4.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag4.style.height = document.body.clientHeight + "px";
                          imageTag4.style.marginLeft = -(document.body.clientHeight * img4.width / img4.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img5" src="https://source.unsplash.com/collection/954550/1922x1080">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img5 = new Image();
                      var imageTag5 = document.getElementById("carousel-img5");
                      img5.src = imageTag5.src;
                      img5.onload=function(){
                        if (img5.width / img5.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag5.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag5.style.height = document.body.clientHeight + "px";
                          imageTag5.style.marginLeft = -(document.body.clientHeight * img5.width / img5.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
                  
                    <div class="item">
                  
                    <img id="carousel-img6" src="https://source.unsplash.com/collection/954550/1922x1082">
                  </div>

                  <!-- è‡ªé€‚åº”å¤§å›¾ -->
                  <script>
                      var img6 = new Image();
                      var imageTag6 = document.getElementById("carousel-img6");
                      img6.src = imageTag6.src;
                      img6.onload=function(){
                        if (img6.width / img6.height <= document.body.clientWidth / document.body.clientHeight) {
                          imageTag6.style.width = document.body.clientWidth + "px";
                        } else {
                          imageTag6.style.height = document.body.clientHeight + "px";
                          imageTag6.style.marginLeft = -(document.body.clientHeight * img6.width / img6.height - document.body.clientWidth) / 2 + "px";
                        }
                      };
                  </script>
                
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href=".carousel" role="button" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
              <span class="sr-only">Geri</span>
            </a>
            <a class="right carousel-control" href=".carousel" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
              <span class="sr-only">Ä°leri</span>
            </a>
          </div>
        </section>
        <script>
          $('section.awSlider .carousel').carousel({
              pause: '',
              interval: 5000
          });
          var startImage = $('section.awSlider .item.active > img').attr('src');
          $('section.awSlider .carousel').on('slid.bs.carousel', function () {
              var bscn = $(this).find('.item.active > img').attr('src');
              $('section.awSlider > img').attr('src', bscn);
          });
        </script>
      

    
 


    <canvas width="100%" height="100%"></canvas>
    <script>
      var c = document.getElementsByTagName('canvas')[0],
          x = c.getContext('2d'),
          w = window.innerWidth,
          h = window.innerHeight,
          pr = window.devicePixelRatio || 1,
          f = 90,
          q,
          m = Math,
          r = 0,
          u = m.PI*2,
          v = m.cos,
          z = m.random
      c.width = w*pr
      c.height = h*pr
      x.scale(pr, pr)
      x.globalAlpha = 0.6

      <!-- æŠ˜çº¿PolylineèƒŒæ™¯ -->
      
    </script>
    

    
      <div id="homelogo" class="homelogo" style="background: rgba(255,255,255,1);"> 
    

        
          <div class="homelogoback"  style="border: 1px solid #404040;" >
            <h1><a href="#content" id="logo">iTimeTraveler</a></h1>
            <h3>Someone knock at the door.</h3>
            <h5>Mr.Seven</h5>
            <!-- <p><a href="https://github.com/iTimeTraveler" target="_blank">Github</a></p> -->
          </div>
        
    
    </div>
  </div>

  <!-- è‡ªé€‚åº”ä¸»é¡µèƒŒæ™¯å¤§å›¾ -->
  

 <!-- home_logo_imageå±…ä¸­ -->
 
    <script>
        var homelogodiv = document.getElementById("homelogo");
        if (document.all.homelogo.offsetWidth > document.body.clientWidth) {
          homelogodiv.style.width = document.body.clientWidth + "px";
          homelogodiv.style.marginLeft = document.body.clientWidth * -0.5 + "px";
        } else {
          homelogodiv.style.width = homelogodiv.clientWidth  + "px";
          homelogodiv.style.marginLeft = (homelogodiv.clientWidth)  * -0.5 + "px";
        }
    </script>
  

  <div class="intro-navigate">
      <p class="navigater-list">
        
          <a id="beautifont" class="main-nav-link" href="index.html">é¦–é¡µ</a>
        
          <a id="beautifont" class="main-nav-link" href="archives">å½’æ¡£</a>
        
          <a id="beautifont" class="main-nav-link" href="categories">åˆ†ç±»</a>
        
          <a id="beautifont" class="main-nav-link" href="tags">æ ‡ç­¾</a>
        
          <a id="beautifont" class="main-nav-link" href="funnysite">é…·ç«™</a>
        
          <a id="beautifont" class="main-nav-link" href="collection">æ”¶è—</a>
        
          <a id="beautifont" class="main-nav-link" href="about">å…³äº</a>
        
          <a id="beautifont" class="main-nav-link" href="/mybooks">ğŸ</a>
        
      </p>
  </div>

</header>
  
  <div id="container">
    <div id="wrap">
      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;">
  
    <article id="post-HTTPSåŸç†ä¸è¯ä¹¦"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/10/30/HTTPSåŸç†ä¸è¯ä¹¦/">HTTPSåŸç†ä¸è¯ä¹¦ç”Ÿæˆ</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/10/30/HTTPSåŸç†ä¸è¯ä¹¦/" class="article-date">
	  <time datetime="2018-10-30T03:08:00.000Z" itemprop="datePublished">2018-10-30</time>
	</a>

      
    <a class="article-category-link" href="categories/Web/">Web</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>HTTPSä¸HTTPæ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸‹HTTPä¸HTTPSçš„è¯·æ±‚è¿‡ç¨‹ï¼š</p>
<p><img src="/gallery/common/http-state.png" alt="HTTPè¯·æ±‚è¿‡ç¨‹"></p>
<p>HTTPS åœ¨ TCP å’Œ HTTP ä¹‹é—´å¢åŠ äº† TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰ï¼Œæä¾›äº†<strong>å†…å®¹åŠ å¯†</strong>ã€<strong>èº«ä»½è®¤è¯</strong>å’Œ<strong>æ•°æ®å®Œæ•´æ€§</strong>ä¸‰å¤§åŠŸèƒ½ã€‚</p>
<p><img src="/gallery/common/https-state.png" alt="HTTPSè¯·æ±‚è¿‡ç¨‹"></p>
        <!-- HTTPSHTTPSä¸HTTPæ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸‹HTTPä¸HTTPSçš„è¯·æ±‚è¿‡ç¨‹ï¼š

HTTPS åœ¨ TCP å’Œ HTTP ä¹‹é—´å¢åŠ äº† TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰ï¼Œæä¾›äº†å†…å®¹åŠ å¯†ã€èº«ä»½è®¤è¯å’Œæ•°æ®å®Œæ•´æ€§ä¸‰å¤§åŠŸèƒ½ã€‚


HTTPSä¹Ÿå°±æ˜¯HTTP over SSL/TLSï¼Œæ‰€æœ‰çš„httpæ•°æ®éƒ½æ˜¯åœ¨SSL/TLSåè®®å°è£…ä¹‹ä¸Šä¼ è¾“çš„ã€‚Httpsåè®®åœ¨......  -->
        <p class="article-more-link">
          <a href="2018/10/30/HTTPSåŸç†ä¸è¯ä¹¦/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/HTTPS/">HTTPS</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-WebSocketåè®®æµ…æ"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/10/27/WebSocketåè®®æµ…æ/">WebSocketåè®®æµ…æ</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/10/27/WebSocketåè®®æµ…æ/" class="article-date">
	  <time datetime="2018-10-27T03:08:00.000Z" itemprop="datePublished">2018-10-27</time>
	</a>

      
    <a class="article-category-link" href="categories/Web/">Web</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="HTTPåè®®çš„ç¼ºç‚¹"><a href="#HTTPåè®®çš„ç¼ºç‚¹" class="headerlink" title="HTTPåè®®çš„ç¼ºç‚¹"></a>HTTPåè®®çš„ç¼ºç‚¹</h2><p><img src="/gallery/common/http-protocol-drawback.jpg" alt="HTTPåè®®çš„ç¼ºç‚¹"></p>
<ol>
<li>å•å‘è¯·æ±‚ï¼šåªèƒ½æ˜¯å®¢æˆ·ç«¯å‘èµ·ï¼ŒæœåŠ¡ç«¯å¤„ç†å¹¶å“åº”</li>
<li>è¯·æ±‚/å“åº”æ¨¡å¼</li>
<li>æ— çŠ¶æ€åè®®</li>
<li>åŠåŒå·¥åè®®</li>
</ol>
<p>åŠåŒå·¥æ•°æ®ä¼ è¾“æŒ‡æ•°æ®å¯ä»¥åœ¨ä¸€ä¸ªä¿¡å·è½½ä½“çš„ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†æ˜¯ä¸èƒ½åŒæ—¶ä¼ è¾“ã€‚HTTPåè®®è¿™ç§å•å‘è¯·æ±‚çš„ç‰¹ç‚¹ï¼Œæ³¨å®šäº†å¦‚æœæœåŠ¡å™¨æœ‰è¿ç»­çš„çŠ¶æ€å˜åŒ–ï¼Œå®¢æˆ·ç«¯è¦è·çŸ¥å°±éå¸¸éº»çƒ¦ã€‚æˆ‘ä»¬åªèƒ½ä½¿ç”¨è½®è¯¢ï¼šæ¯éš”ä¸€æ®µæ—¶å€™ï¼Œå°±å‘å‡ºä¸€ä¸ªè¯¢é—®ï¼Œäº†è§£æœåŠ¡å™¨æœ‰æ²¡æœ‰æ–°çš„ä¿¡æ¯ã€‚è½®è¯¢çš„æ•ˆç‡ä½ï¼Œéå¸¸æµªè´¹èµ„æºã€‚WebSocketå°±å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
        <!-- HTTPåè®®çš„ç¼ºç‚¹

å•å‘è¯·æ±‚ï¼šåªèƒ½æ˜¯å®¢æˆ·ç«¯å‘èµ·ï¼ŒæœåŠ¡ç«¯å¤„ç†å¹¶å“åº”
è¯·æ±‚/å“åº”æ¨¡å¼
æ— çŠ¶æ€åè®®
åŠåŒå·¥åè®®

åŠåŒå·¥æ•°æ®ä¼ è¾“æŒ‡æ•°æ®å¯ä»¥åœ¨ä¸€ä¸ªä¿¡å·è½½ä½“çš„ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†æ˜¯ä¸èƒ½åŒæ—¶ä¼ è¾“ã€‚HTTPåè®®è¿™ç§å•å‘è¯·æ±‚çš„ç‰¹ç‚¹ï¼Œæ³¨å®šäº†å¦‚æœæœåŠ¡å™¨æœ‰è¿ç»­çš„çŠ¶æ€å˜åŒ–ï¼Œå®¢æˆ·ç«¯è¦è·çŸ¥å°±éå¸¸éº»çƒ¦ã€‚æˆ‘ä»¬åªèƒ½ä½¿ç”¨è½®è¯¢ï¼šæ¯éš”ä¸€æ®µæ—¶å€™ï¼Œå°±å‘å‡ºä¸€ä¸ªè¯¢é—®ï¼Œäº†è§£æœåŠ¡å™¨æœ‰æ²¡æœ‰æ–°çš„ä¿¡æ¯ã€‚è½®è¯¢çš„æ•ˆç‡ä½ï¼Œéå¸¸æµªè´¹èµ„æºã€‚WebSocket......  -->
        <p class="article-more-link">
          <a href="2018/10/27/WebSocketåè®®æµ…æ/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/WebSocket/">WebSocket</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-CPU Cacheä¸ç¼“å­˜è¡Œ"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/09/09/CPU Cacheä¸ç¼“å­˜è¡Œ/">CPU Cacheä¸ç¼“å­˜è¡Œ</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/09/09/CPU Cacheä¸ç¼“å­˜è¡Œ/" class="article-date">
	  <time datetime="2018-09-09T14:20:55.000Z" itemprop="datePublished">2018-09-09</time>
	</a>

      
    <a class="article-category-link" href="categories/Java/">Java</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>å…ˆçœ‹ä¸‹é¢è¿™ä¸¤ä¸ªå¾ªç¯éå†å“ªä¸ªå¿«ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] array = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">64</span> * <span class="number">1024</span>][<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨ªå‘éå†</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">64</span> * <span class="number">1024</span>; i ++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1024</span>; j ++)</span><br><span class="line">        array[i][j] ++;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çºµå‘éå†</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1024</span>; i ++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">64</span> * <span class="number">1024</span>; j ++)</span><br><span class="line">        array[j][i] ++;</span><br></pre></td></tr></table></figure>
<p>åœ¨CPUå¤„ç†å™¨å‚æ•°ä¸º 2.3 GHz Intel Core i5 çš„Macä¸Šçš„ç»“æœæ˜¯ï¼š</p>
<blockquote>
<p>æ¨ªå‘éå†:    80ms<br>çºµå‘éå†:    2139ms</p>
</blockquote>
<p>æ¨ªå‘éå†çš„ CPU cache å‘½ä¸­ç‡é«˜ï¼Œæ‰€ä»¥å®ƒæ¯”çºµå‘éå†çº¦å¿«è¿™ä¹ˆå¤šå€ï¼</p>
<p><a href="http://igoro.com/archive/gallery-of-processor-cache-effects/" target="_blank" rel="noopener">Gallery of Processor Cache Effects</a> ç”¨ 7 ä¸ªæºç ç¤ºä¾‹ç”ŸåŠ¨çš„ä»‹ç» cache åŸç†ï¼Œæ·±å…¥æµ…å‡ºï¼ä½†æ˜¯å¯èƒ½å› æ“ä½œç³»ç»Ÿçš„å·®å¼‚ã€ç¼–è¯‘å™¨æ˜¯å¦ä¼˜åŒ–ï¼Œä»¥åŠè¿‘äº›å¹´ cache æ€§èƒ½çš„æå‡ï¼Œæœ‰äº›æ ·ä¾‹åœ¨ Mac çš„æ•ˆæœä¸åŸæ–‡ç›¸å·®è¾ƒå¤§ã€‚</p>
        <!-- å¼•è¨€å…ˆçœ‹ä¸‹é¢è¿™ä¸¤ä¸ªå¾ªç¯éå†å“ªä¸ªå¿«ï¼Ÿ
1234567891011int[][] array = new int[64 * 1024][1024];// æ¨ªå‘éå†for(int i = 0; i &lt; 64 * 1024; i ++)    for(int j = 0; j &lt; 1024; j ++)        array[i][j] ++;// çºµå‘éå†for(int i = 0......  -->
        <p class="article-more-link">
          <a href="2018/09/09/CPU Cacheä¸ç¼“å­˜è¡Œ/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-ã€Javaã€‘J.U.Cå¹¶å‘åŒ… - AQSæœºåˆ¶"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/07/19/ã€Javaã€‘J.U.Cå¹¶å‘åŒ… - AQSæœºåˆ¶/">ã€Javaã€‘J.U.Cå¹¶å‘åŒ… - AQSæœºåˆ¶</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/07/19/ã€Javaã€‘J.U.Cå¹¶å‘åŒ… - AQSæœºåˆ¶/" class="article-date">
	  <time datetime="2018-07-19T14:20:55.000Z" itemprop="datePublished">2018-07-19</time>
	</a>

      
    <a class="article-category-link" href="categories/Java/">Java</a><a class="article-category-link" href="categories/Java/æºç åˆ†æ/">æºç åˆ†æ</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Javaå¹¶å‘åŒ…ï¼ˆjava.util.concurrentï¼‰ä¸­æä¾›äº†å¾ˆå¤šå¹¶å‘å·¥å…·ï¼Œè¿™å…¶ä¸­ï¼Œå¾ˆå¤šæˆ‘ä»¬è€³ç†Ÿèƒ½è¯¦çš„å¹¶å‘å·¥å…·ï¼Œè­¬å¦‚ReentrantLockã€Semaphoreï¼ŒCountDownLatchï¼ŒCyclicBarrierï¼Œå®ƒä»¬çš„å®ç°éƒ½ç”¨åˆ°äº†ä¸€ä¸ªå…±åŒçš„åŸºç±» - <strong>AbstractQueuedSynchronizer</strong>ï¼Œç®€ç§°AQSã€‚AQSæä¾›äº†ä¸€ç§åŸå­å¼ç®¡ç†åŒæ­¥çŠ¶æ€ã€é˜»å¡å’Œå”¤é†’çº¿ç¨‹åŠŸèƒ½ä»¥åŠé˜Ÿåˆ—æ¨¡å‹çš„ç®€å•æ¡†æ¶ã€‚æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé”å’ŒåŒæ­¥å™¨çš„æ¡†æ¶ï¼Œä½¿ç”¨AQSèƒ½ç®€å•ä¸”é«˜æ•ˆåœ°æ„é€ å‡ºåº”ç”¨å¹¿æ³›çš„å¤§é‡çš„åŒæ­¥å™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬æåˆ°çš„ReentrantLockï¼ŒSemaphoreï¼Œå…¶ä»–çš„è¯¸å¦‚ReentrantReadWriteLockï¼ŒSynchronousQueueï¼ŒFutureTaskç­‰ç­‰çš†æ˜¯åŸºäºAQSçš„ã€‚</p>
<h2 id="è®¾è®¡æ€æƒ³"><a href="#è®¾è®¡æ€æƒ³" class="headerlink" title="è®¾è®¡æ€æƒ³"></a>è®¾è®¡æ€æƒ³</h2><p>åŒæ­¥å™¨èƒŒåçš„åŸºæœ¬æ€æƒ³éå¸¸ç®€å•ï¼Œå¯ä»¥å‚è€ƒAQSä½œè€… Doug Lea çš„è®ºæ–‡ï¼š<a href="http://gee.cs.oswego.edu/dl/papers/aqs.pdf" target="_blank" rel="noopener">The java.util.concurrent Synchronizer Framework</a>ã€‚åŒæ­¥å™¨ä¸€èˆ¬åŒ…å«ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯acquireï¼Œå¦ä¸€ç§æ˜¯releaseã€‚</p>
<ul>
<li>acquireæ“ä½œé˜»å¡è°ƒç”¨çš„çº¿ç¨‹ï¼Œç›´åˆ°åŒæ­¥çŠ¶æ€å…è®¸å…¶ç»§ç»­æ‰§è¡Œã€‚</li>
<li>releaseæ“ä½œåˆ™æ˜¯æ”¹å˜åŒæ­¥çŠ¶æ€ï¼Œä½¿å¾—ä¸€æˆ–å¤šä¸ªè¢«acquireé˜»å¡çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚</li>
</ul>
<p>å…¶ä¸­acquireæ“ä½œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (synchronization state does not allow acquire) &#123;</span><br><span class="line">	enqueue current thread <span class="keyword">if</span> not already queued;</span><br><span class="line">	possibly block current thread;</span><br><span class="line">&#125;</span><br><span class="line">dequeue current thread <span class="keyword">if</span> it was queued;</span><br></pre></td></tr></table></figure>
<p>releaseæ“ä½œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update synchronization state;</span><br><span class="line"><span class="keyword">if</span> (state may permit a blocked thread to acquire)</span><br><span class="line">	unblock one or more queued threads;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†å®ç°ä¸Šè¿°æ“ä½œï¼Œéœ€è¦ä¸‹é¢ä¸‰ä¸ªåŸºæœ¬ç»„ä»¶çš„ç›¸äº’åä½œï¼š</p>
<ul>
<li>åŒæ­¥çŠ¶æ€çš„åŸå­æ€§ç®¡ç†ï¼›</li>
<li>çº¿ç¨‹çš„é˜»å¡ä¸è§£é™¤é˜»å¡ï¼›</li>
<li>é˜Ÿåˆ—çš„ç®¡ç†ï¼›</li>
</ul>
<p>AQSæ¡†æ¶å€ŸåŠ©äºä¸¤ä¸ªç±»ï¼š<strong>Unsafe</strong>(æä¾›CASæ“ä½œ) å’Œ <strong>LockSupport</strong>(æä¾›park/unparkæ“ä½œ)ã€‚</p>
<h2 id="1-åŒæ­¥çŠ¶æ€çš„åŸå­æ€§ç®¡ç†"><a href="#1-åŒæ­¥çŠ¶æ€çš„åŸå­æ€§ç®¡ç†" class="headerlink" title="1. åŒæ­¥çŠ¶æ€çš„åŸå­æ€§ç®¡ç†"></a>1. åŒæ­¥çŠ¶æ€çš„åŸå­æ€§ç®¡ç†</h2><p>AQSç±»ä½¿ç”¨å•ä¸ª<code>int</code>ï¼ˆ32ä½ï¼‰æ¥ä¿å­˜åŒæ­¥çŠ¶æ€ï¼Œå¹¶æš´éœ²å‡º<code>getState</code>ã€<code>setState</code>ä»¥åŠ<code>compareAndSet</code>æ“ä½œæ¥è¯»å–å’Œæ›´æ–°è¿™ä¸ªçŠ¶æ€ã€‚è¯¥æ•´æ•°å¯ä»¥è¡¨ç°ä»»ä½•çŠ¶æ€ã€‚æ¯”å¦‚ï¼Œ <code>Semaphore</code> ç”¨å®ƒæ¥è¡¨ç°å‰©ä½™çš„è®¸å¯æ•°ï¼Œ<code>ReentrantLock</code> ç”¨å®ƒæ¥è¡¨ç°æ‹¥æœ‰å®ƒçš„çº¿ç¨‹å·²ç»è¯·æ±‚äº†å¤šå°‘æ¬¡é”ï¼›<code>FutureTask</code> ç”¨å®ƒæ¥è¡¨ç°ä»»åŠ¡çš„çŠ¶æ€(å°šæœªå¼€å§‹ã€è¿è¡Œã€å®Œæˆå’Œå–æ¶ˆ)ã€‚</p>
<p>å¦‚JDKçš„æ–‡æ¡£ä¸­æ‰€è¯´ï¼Œä½¿ç”¨AQSæ¥å®ç°ä¸€ä¸ªåŒæ­¥å™¨éœ€è¦è¦†ç›–å®ç°å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨<code>getState</code>ï¼Œ<code>setState</code>ï¼Œ<code>compareAndSetState</code>è¿™å‡ ä¸ªæ–¹æ³•æ¥è®¾ç½®æˆ–è€…è·å–çŠ¶æ€ã€‚</p>
<ul>
<li><p><code>boolean tryAcquire(int arg)</code> </p>
</li>
<li><p><code>boolean tryRelease(int arg)</code> </p>
</li>
<li><p><code>int tryAcquireShared(int arg)</code> </p>
</li>
<li><p><code>boolean tryReleaseShared(int arg)</code> </p>
</li>
<li><code>boolean isHeldExclusively()</code></li>
</ul>
<p>ä»¥ä¸Šæ–¹æ³•ä¸éœ€è¦å…¨éƒ¨å®ç°ï¼Œæ ¹æ®è·å–çš„é”çš„ç§ç±»å¯ä»¥é€‰æ‹©å®ç°ä¸åŒçš„æ–¹æ³•ï¼Œæ”¯æŒç‹¬å (æ’ä»–)è·å–é”çš„åŒæ­¥å™¨åº”è¯¥å®ç°<code>tryAcquire</code>ã€ <code>tryRelease</code>ã€<code>isHeldExclusively</code>è€Œæ”¯æŒå…±äº«è·å–çš„åŒæ­¥å™¨åº”è¯¥å®ç°<code>tryAcquireShared</code>ã€<code>tryReleaseShared</code>ã€<code>isHeldExclusively</code>ã€‚ä¸‹é¢ä»¥ <code>CountDownLatch</code> ä¸¾ä¾‹è¯´æ˜åŸºäºAQSå®ç°åŒæ­¥å™¨, <code>CountDownLatch</code> ç”¨åŒæ­¥çŠ¶æ€æŒæœ‰å½“å‰è®¡æ•°ï¼Œ<code>countDown</code>æ–¹æ³•è°ƒç”¨ releaseä»è€Œå¯¼è‡´è®¡æ•°å™¨é€’å‡ï¼›å½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œè§£é™¤æ‰€æœ‰çº¿ç¨‹çš„ç­‰å¾…ï¼›<code>await</code>è°ƒç”¨acquireï¼Œå¦‚æœè®¡æ•°å™¨ä¸º0ï¼Œ<code>acquire</code> ä¼šç«‹å³è¿”å›ï¼Œå¦åˆ™é˜»å¡ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="http://gee.cs.oswego.edu/dl/papers/aqs.pdf" target="_blank" rel="noopener">The java.util.concurrent Synchronizer Framework - AQSæ¡†æ¶ä½œè€…Doug Leaçš„è®ºæ–‡</a></li>
<li><a href="http://ifeve.com/aqs-2/" target="_blank" rel="noopener">The j.u.c Synchronizer Frameworkç¿»è¯‘(äºŒ)è®¾è®¡ä¸å®ç°</a></li>
<li><a href="https://blog.csdn.net/vernonzheng/article/details/8288251" target="_blank" rel="noopener">Javaå¤šçº¿ç¨‹ï¼ˆä¹ï¼‰ä¹‹ReentrantLockä¸Condition</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/æºç åˆ†æ/">æºç åˆ†æ</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-ã€Androidã€‘åŠ¨æ€é“¾æ¥åº“soçš„åŠ è½½åŸç†"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/07/03/ã€Androidã€‘åŠ¨æ€é“¾æ¥åº“soçš„åŠ è½½åŸç†/">ã€Androidã€‘åŠ¨æ€é“¾æ¥åº“soçš„åŠ è½½åŸç†</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/07/03/ã€Androidã€‘åŠ¨æ€é“¾æ¥åº“soçš„åŠ è½½åŸç†/" class="article-date">
	  <time datetime="2018-07-03T03:51:55.000Z" itemprop="datePublished">2018-07-03</time>
	</a>

      
    <a class="article-category-link" href="categories/Android/">Android</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘å¼€å‘çš„ç»„ä»¶æ—¶å¸¸å‡ºç°äº†è¿è¡Œæ—¶åŠ è½½soåº“å¤±è´¥é—®é¢˜ï¼Œæ¯å¤©éƒ½ä¼šæœ‰<code>java.lang.UnsatisfiedLinkError</code>çš„é”™è¯¯çˆ†å‡ºæ¥ï¼Œè€Œä¸”çº¿ä¸Šæ€»æ˜¯å¶ç„¶å¤ç°ï¼Œå¾ˆç–‘æƒ‘ã€‚æ‰€ä»¥æœ¬æ–‡å°†ä»AOSPæºç ç®€å•è·Ÿè¸ªAndroidä¸­çš„åŠ¨æ€é“¾æ¥åº“soçš„åŠ è½½åŸç†ï¼Œè¯•å›¾æ‰¾å‡ºä¸€ä¸çº¿ç´¢ã€‚</p>
<h2 id="åŠ è½½å…¥å£"><a href="#åŠ è½½å…¥å£" class="headerlink" title="åŠ è½½å…¥å£"></a>åŠ è½½å…¥å£</h2><p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“åœ¨Android(Java)ä¸­åŠ è½½ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“éå¸¸ç®€å•ã€‚å°±æ˜¯æˆ‘ä»¬æ—¥å¸¸è°ƒç”¨çš„ <code>System.load(Sring filename)</code> æˆ–è€…<code>System.loadLibrary(String libname)</code>å¼€å§‹ã€‚ çœ‹è¿‡<a href="http://47.98.205.211/2017/05/17/jni/" target="_blank" rel="noopener">ã€Šç†è§£JNIæŠ€æœ¯ã€‹</a>çš„åº”è¯¥çŸ¥é“ä¸Šè¿°ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šè°ƒç”¨nativeå±‚çš„<code>JNI_OnLoad()</code>æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨äºåŠ¨æ€æ³¨å†Œnativeæ–¹æ³•ã€‚</p>
<h2 id="System-loadLibrary"><a href="#System-loadLibrary" class="headerlink" title="# System.loadLibrary"></a># System.loadLibrary</h2><p>[System.java]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loadLibrary</span><span class="params">(String libname)</span> </span>&#123;</span><br><span class="line">    Runtime.getRuntime().loadLibrary0(VMStack.getCallingClassLoader(), libname);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤„<code>VMStack.getCallingClassLoader()</code>æ‹¿åˆ°çš„æ˜¯è°ƒç”¨è€…çš„ClassLoaderï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯<strong>PathClassLoader</strong>ã€‚æˆ‘ä»¬è¿›å…¥Runtimeç±»çš„<code>loadLibrary0()</code>æ–¹æ³•çœ‹çœ‹ã€‚</p>
<p>[Runtime.java]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">loadLibrary0</span><span class="params">(ClassLoader loader, String libname)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (libname.indexOf((<span class="keyword">int</span>)File.separatorChar) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsatisfiedLinkError(<span class="string">"Directory separator should not appear in library name: "</span> + libname);</span><br><span class="line">    &#125;</span><br><span class="line">    String libraryName = libname;</span><br><span class="line">    <span class="comment">// 1. å¦‚æœclassloderå­˜åœ¨ï¼Œé€šè¿‡loader.findLibrary()æŸ¥æ‰¾åˆ°soè·¯å¾„</span></span><br><span class="line">    <span class="keyword">if</span> (loader != <span class="keyword">null</span>) &#123;</span><br><span class="line">        String filename = loader.findLibrary(libraryName);</span><br><span class="line">        <span class="keyword">if</span> (filename == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// It's not necessarily true that the ClassLoader used</span></span><br><span class="line">            <span class="comment">// System.mapLibraryName, but the default setup does, and it's</span></span><br><span class="line">            <span class="comment">// misleading to say we didn't find "libMyLibrary.so" when we</span></span><br><span class="line">            <span class="comment">// actually searched for "liblibMyLibrary.so.so".</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UnsatisfiedLinkError(loader + <span class="string">" couldn't find \""</span> +</span><br><span class="line">                                           System.mapLibraryName(libraryName) + <span class="string">"\""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        String error = doLoad(filename, loader);</span><br><span class="line">        <span class="keyword">if</span> (error != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UnsatisfiedLinkError(error);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. å¦‚æœclassloderä¸å­˜åœ¨ï¼Œé€šè¿‡loader.findLibrary()æŸ¥æ‰¾åˆ°soè·¯å¾„</span></span><br><span class="line">    String filename = System.mapLibraryName(libraryName);</span><br><span class="line">    List&lt;String&gt; candidates = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    String lastError = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (String directory : getLibPaths()) &#123;	<span class="comment">// getLibPaths()ä»£ç åœ¨æœ€ä¸‹æ–¹</span></span><br><span class="line">        String candidate = directory + filename;</span><br><span class="line">        candidates.add(candidate);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (IoUtils.canOpenReadOnly(candidate)) &#123;</span><br><span class="line">            String error = doLoad(candidate, loader);</span><br><span class="line">            <span class="keyword">if</span> (error == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>; <span class="comment">// We successfully loaded the library. Job done.</span></span><br><span class="line">            &#125;</span><br><span class="line">            lastError = error;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. éƒ½æ²¡æ‰¾åˆ°ï¼ŒæŠ›å‡º UnsatisfiedLinkError å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (lastError != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsatisfiedLinkError(lastError);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> UnsatisfiedLinkError(<span class="string">"Library "</span> + libraryName + <span class="string">" not found; tried "</span> + candidates);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        <!-- å‰è¨€æœ€è¿‘å¼€å‘çš„ç»„ä»¶æ—¶å¸¸å‡ºç°äº†è¿è¡Œæ—¶åŠ è½½soåº“å¤±è´¥é—®é¢˜ï¼Œæ¯å¤©éƒ½ä¼šæœ‰java.lang.UnsatisfiedLinkErrorçš„é”™è¯¯çˆ†å‡ºæ¥ï¼Œè€Œä¸”çº¿ä¸Šæ€»æ˜¯å¶ç„¶å¤ç°ï¼Œå¾ˆç–‘æƒ‘ã€‚æ‰€ä»¥æœ¬æ–‡å°†ä»AOSPæºç ç®€å•è·Ÿè¸ªAndroidä¸­çš„åŠ¨æ€é“¾æ¥åº“soçš„åŠ è½½åŸç†ï¼Œè¯•å›¾æ‰¾å‡ºä¸€ä¸çº¿ç´¢ã€‚
åŠ è½½å…¥å£é¦–å…ˆæˆ‘ä»¬çŸ¥é“åœ¨Android(Java)ä¸­åŠ è½½ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“éå¸¸ç®€å•ã€‚å°±æ˜¯æˆ‘ä»¬æ—¥å¸¸è°ƒç”¨çš„ System.load(Srin......  -->
        <p class="article-more-link">
          <a href="2018/07/03/ã€Androidã€‘åŠ¨æ€é“¾æ¥åº“soçš„åŠ è½½åŸç†/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-ã€Javaã€‘ä½¿ç”¨Atomicå®ç°é”"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/05/22/ã€Javaã€‘ä½¿ç”¨Atomicå®ç°é”/">ã€Javaã€‘ä½¿ç”¨Atomicå˜é‡å®ç°é”</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/05/22/ã€Javaã€‘ä½¿ç”¨Atomicå®ç°é”/" class="article-date">
	  <time datetime="2018-05-22T14:20:55.000Z" itemprop="datePublished">2018-05-22</time>
	</a>

      
    <a class="article-category-link" href="categories/Java/">Java</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="AtomicåŸå­æ“ä½œ"><a href="#AtomicåŸå­æ“ä½œ" class="headerlink" title="AtomicåŸå­æ“ä½œ"></a>AtomicåŸå­æ“ä½œ</h2><p>Javaä»JDK1.5å¼€å§‹æä¾›äº†java.util.concurrent.atomicåŒ…ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæ— é”çš„è¿›è¡ŒåŸå­æ“ä½œã€‚åŸå­å˜é‡çš„åº•å±‚ä½¿ç”¨äº†å¤„ç†å™¨æä¾›çš„åŸå­æŒ‡ä»¤ï¼Œä½†æ˜¯ä¸åŒçš„CPUæ¶æ„å¯èƒ½æä¾›çš„åŸå­æŒ‡ä»¤ä¸ä¸€æ ·ï¼Œä¹Ÿæœ‰å¯èƒ½éœ€è¦æŸç§å½¢å¼çš„å†…éƒ¨é”,æ‰€ä»¥è¯¥æ–¹æ³•ä¸èƒ½ç»å¯¹ä¿è¯çº¿ç¨‹ä¸è¢«é˜»å¡ã€‚</p>
<p>åœ¨AtomicåŒ…é‡Œä¸€å…±æœ‰12ä¸ªç±»ï¼Œå››ç§åŸå­æ›´æ–°æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯åŸå­æ›´æ–°åŸºæœ¬ç±»å‹ï¼ŒåŸå­æ›´æ–°æ•°ç»„ï¼ŒåŸå­æ›´æ–°å¼•ç”¨å’ŒåŸå­æ›´æ–°å­—æ®µã€‚AtomicåŒ…é‡Œçš„ç±»åŸºæœ¬éƒ½æ˜¯ä½¿ç”¨Unsafeå®ç°çš„åŒ…è£…ç±»ã€‚</p>
<ul>
<li>åŸå­æ›´æ–°åŸºæœ¬ç±»å‹ç±»ï¼š AtomicBooleanï¼ŒAtomicIntegerï¼ŒAtomicLongï¼ŒAtomicReference</li>
<li>åŸå­æ›´æ–°æ•°ç»„ç±»ï¼šAtomicIntegerArrayï¼ŒAtomicLongArray</li>
<li>åŸå­æ›´æ–°å¼•ç”¨ç±»å‹ï¼šAtomicMarkableReferenceï¼ŒAtomicStampedReferenceï¼ŒAtomicReferenceArray</li>
<li>åŸå­æ›´æ–°å­—æ®µç±»ï¼šAtomicLongFieldUpdaterï¼ŒAtomicIntegerFieldUpdaterï¼ŒAtomicReferenceFieldUpdater</li>
</ul>
<p>è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒï¼š<a href="http://ifeve.com/java-atomic/" target="_blank" rel="noopener">Javaä¸­çš„AtomicåŒ…ä½¿ç”¨æŒ‡å—</a></p>
<h2 id="Atomicçš„åŸç†"><a href="#Atomicçš„åŸç†" class="headerlink" title="Atomicçš„åŸç†"></a>Atomicçš„åŸç†</h2><p>ä¸‹é¢é€šè¿‡<code>AtomicInteger</code>çš„æºç æ¥çœ‹ä¸€ä¸‹æ˜¯æ€ä¹ˆåœ¨æ²¡æœ‰é”çš„æƒ…å†µä¸‹ä¿è¯æ•°æ®æ­£ç¡®æ€§ã€‚é¦–å…ˆçœ‹ä¸€ä¸‹<code>incrementAndGet()</code>æ–¹æ³•çš„å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Atomically increments by one the current value.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the updated value</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">incrementAndGet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        <!-- AtomicåŸå­æ“ä½œJavaä»JDK1.5å¼€å§‹æä¾›äº†java.util.concurrent.atomicåŒ…ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæ— é”çš„è¿›è¡ŒåŸå­æ“ä½œã€‚åŸå­å˜é‡çš„åº•å±‚ä½¿ç”¨äº†å¤„ç†å™¨æä¾›çš„åŸå­æŒ‡ä»¤ï¼Œä½†æ˜¯ä¸åŒçš„CPUæ¶æ„å¯èƒ½æä¾›çš„åŸå­æŒ‡ä»¤ä¸ä¸€æ ·ï¼Œä¹Ÿæœ‰å¯èƒ½éœ€è¦æŸç§å½¢å¼çš„å†…éƒ¨é”,æ‰€ä»¥è¯¥æ–¹æ³•ä¸èƒ½ç»å¯¹ä¿è¯çº¿ç¨‹ä¸è¢«é˜»å¡ã€‚
åœ¨AtomicåŒ…é‡Œä¸€å…±æœ‰12ä¸ªç±»ï¼Œå››ç§åŸå­æ›´æ–°æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯åŸå­æ›´æ–°åŸºæœ¬ç±»å‹ï¼ŒåŸå­æ›´......  -->
        <p class="article-more-link">
          <a href="2018/05/22/ã€Javaã€‘ä½¿ç”¨Atomicå®ç°é”/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-ã€Javaã€‘NIOçš„ç†è§£"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/05/15/ã€Javaã€‘NIOçš„ç†è§£/">ã€Javaã€‘NIOçš„åŸç†ä¸æµ…æ</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/05/15/ã€Javaã€‘NIOçš„ç†è§£/" class="article-date">
	  <time datetime="2018-05-15T14:20:55.000Z" itemprop="datePublished">2018-05-15</time>
	</a>

      
    <a class="article-category-link" href="categories/Java/">Java</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‡ ä¸ªæ¦‚å¿µ"><a href="#å‡ ä¸ªæ¦‚å¿µ" class="headerlink" title="å‡ ä¸ªæ¦‚å¿µ"></a>å‡ ä¸ªæ¦‚å¿µ</h2><h3 id="ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´"><a href="#ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´" class="headerlink" title="ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´"></a>ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´</h3><p>ç°åœ¨æ“ä½œç³»ç»Ÿéƒ½æ˜¯é‡‡ç”¨è™šæ‹Ÿå­˜å‚¨å™¨ï¼Œé‚£ä¹ˆå¯¹32ä½æ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå®ƒçš„å¯»å€ç©ºé—´ï¼ˆè™šæ‹Ÿå­˜å‚¨ç©ºé—´ï¼‰ä¸º4Gï¼ˆ2çš„32æ¬¡æ–¹ï¼‰ã€‚æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯å†…æ ¸ï¼Œç‹¬ç«‹äºæ™®é€šçš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥è®¿é—®å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿæœ‰è®¿é—®åº•å±‚ç¡¬ä»¶è®¾å¤‡çš„æ‰€æœ‰æƒé™ã€‚ä¸ºäº†ä¿è¯ç”¨æˆ·è¿›ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œå†…æ ¸ï¼ˆkernelï¼‰ï¼Œä¿è¯å†…æ ¸çš„å®‰å…¨ï¼Œæ“å¿ƒç³»ç»Ÿå°†è™šæ‹Ÿç©ºé—´åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºå†…æ ¸ç©ºé—´ï¼Œä¸€éƒ¨åˆ†ä¸ºç”¨æˆ·ç©ºé—´ã€‚é’ˆå¯¹linuxæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå°†æœ€é«˜çš„1Gå­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€0xC0000000åˆ°0xFFFFFFFFï¼‰ï¼Œä¾›å†…æ ¸ä½¿ç”¨ï¼Œç§°ä¸ºå†…æ ¸ç©ºé—´ï¼Œè€Œå°†è¾ƒä½çš„3Gå­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€0x00000000åˆ°0xBFFFFFFFï¼‰ï¼Œä¾›å„ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œç§°ä¸ºç”¨æˆ·ç©ºé—´ã€‚</p>
<p>åœ¨Linuxä¸–ç•Œï¼Œè¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶è®¾å¤‡ï¼Œå½“è¿›ç¨‹éœ€è¦è®¿é—®ç¡¬ä»¶è®¾å¤‡(æ¯”å¦‚è¯»å–ç£ç›˜æ–‡ä»¶ï¼Œæ¥æ”¶ç½‘ç»œæ•°æ®ç­‰ç­‰)æ—¶ï¼Œå¿…é¡»ç”±ç”¨æˆ·æ€æ¨¡å¼åˆ‡æ¢è‡³å†…æ ¸æ€æ¨¡å¼ï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨è®¿é—®ç¡¬ä»¶è®¾å¤‡ã€‚</p>
<h3 id="æ–‡ä»¶æè¿°ç¬¦fd"><a href="#æ–‡ä»¶æè¿°ç¬¦fd" class="headerlink" title="æ–‡ä»¶æè¿°ç¬¦fd"></a>æ–‡ä»¶æè¿°ç¬¦fd</h3><p>æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile descriptorï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„ä¸€ä¸ªæœ¯è¯­ï¼Œæ˜¯ä¸€ä¸ªç”¨äºè¡¨è¿°æŒ‡å‘æ–‡ä»¶çš„å¼•ç”¨çš„æŠ½è±¡åŒ–æ¦‚å¿µã€‚</p>
<p>æ–‡ä»¶æè¿°ç¬¦åœ¨å½¢å¼ä¸Šæ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚å®é™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªç´¢å¼•å€¼ï¼ŒæŒ‡å‘å†…æ ¸ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹æ‰€ç»´æŠ¤çš„è¯¥è¿›ç¨‹æ‰“å¼€æ–‡ä»¶çš„è®°å½•è¡¨ã€‚å½“ç¨‹åºæ‰“å¼€ä¸€ä¸ªç°æœ‰æ–‡ä»¶æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œå†…æ ¸å‘è¿›ç¨‹è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œä¸€äº›æ¶‰åŠåº•å±‚çš„ç¨‹åºç¼–å†™å¾€å¾€ä¼šå›´ç»•ç€æ–‡ä»¶æè¿°ç¬¦å±•å¼€ã€‚ä½†æ˜¯æ–‡ä»¶æè¿°ç¬¦è¿™ä¸€æ¦‚å¿µå¾€å¾€åªé€‚ç”¨äºUNIXã€Linuxè¿™æ ·çš„æ“ä½œç³»ç»Ÿã€‚</p>
        <!-- å‡ ä¸ªæ¦‚å¿µç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ç°åœ¨æ“ä½œç³»ç»Ÿéƒ½æ˜¯é‡‡ç”¨è™šæ‹Ÿå­˜å‚¨å™¨ï¼Œé‚£ä¹ˆå¯¹32ä½æ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå®ƒçš„å¯»å€ç©ºé—´ï¼ˆè™šæ‹Ÿå­˜å‚¨ç©ºé—´ï¼‰ä¸º4Gï¼ˆ2çš„32æ¬¡æ–¹ï¼‰ã€‚æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯å†…æ ¸ï¼Œç‹¬ç«‹äºæ™®é€šçš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥è®¿é—®å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿæœ‰è®¿é—®åº•å±‚ç¡¬ä»¶è®¾å¤‡çš„æ‰€æœ‰æƒé™ã€‚ä¸ºäº†ä¿è¯ç”¨æˆ·è¿›ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œå†…æ ¸ï¼ˆkernelï¼‰ï¼Œä¿è¯å†…æ ¸çš„å®‰å…¨ï¼Œæ“å¿ƒç³»ç»Ÿå°†è™šæ‹Ÿç©ºé—´åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºå†…æ ¸ç©ºé—´ï¼Œä¸€éƒ¨åˆ†ä¸ºç”¨æˆ·ç©ºé—´ã€‚é’ˆå¯¹linuxæ“ä½œç³»ç»Ÿ......  -->
        <p class="article-more-link">
          <a href="2018/05/15/ã€Javaã€‘NIOçš„ç†è§£/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-ã€Javaã€‘Threadç±»ä¸­çš„join()æ–¹æ³•åŸç†"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/05/04/ã€Javaã€‘Threadç±»ä¸­çš„join()æ–¹æ³•åŸç†/">ã€Javaã€‘Threadç±»ä¸­çš„join()æ–¹æ³•åŸç†</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/05/04/ã€Javaã€‘Threadç±»ä¸­çš„join()æ–¹æ³•åŸç†/" class="article-date">
	  <time datetime="2018-05-04T14:20:55.000Z" itemprop="datePublished">2018-05-04</time>
	</a>

      
    <a class="article-category-link" href="categories/Java/">Java</a><a class="article-category-link" href="categories/Java/æºç åˆ†æ/">æºç åˆ†æ</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><code>join()</code>æ˜¯Threadç±»çš„ä¸€ä¸ªæ–¹æ³•ã€‚æ ¹æ®jdkæ–‡æ¡£çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>public final void join()throws InterruptedException:  <strong>Waits for this thread to die</strong>.</p>
</blockquote>
<p><code>join()</code>æ–¹æ³•çš„ä½œç”¨ï¼Œæ˜¯ç­‰å¾…è¿™ä¸ªçº¿ç¨‹ç»“æŸï¼›ä½†æ˜¾ç„¶ï¼Œè¿™æ ·çš„å®šä¹‰å¹¶ä¸æ¸…æ™°ã€‚ä¸ªäººè®¤ä¸ºâ€Java 7 Concurrency Cookbookâ€çš„å®šä¹‰è¾ƒä¸ºæ¸…æ™°ï¼š</p>
<blockquote>
<p><strong>join() method suspends the execution of the calling thread until the object called finishes its execution.</strong></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œt.join()æ–¹æ³•é˜»å¡è°ƒç”¨æ­¤æ–¹æ³•çš„çº¿ç¨‹(calling thread)ï¼Œç›´åˆ°çº¿ç¨‹tå®Œæˆï¼Œæ­¤çº¿ç¨‹å†ç»§ç»­ï¼›é€šå¸¸ç”¨äºåœ¨main()ä¸»çº¿ç¨‹å†…ï¼Œç­‰å¾…å…¶å®ƒçº¿ç¨‹å®Œæˆå†ç»“æŸmain()ä¸»çº¿ç¨‹ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
        <!-- ç®€ä»‹join()æ˜¯Threadç±»çš„ä¸€ä¸ªæ–¹æ³•ã€‚æ ¹æ®jdkæ–‡æ¡£çš„å®šä¹‰ï¼š

public final void join()throws InterruptedException:  Waits for this thread to die.

join()æ–¹æ³•çš„ä½œç”¨ï¼Œæ˜¯ç­‰å¾…è¿™ä¸ªçº¿ç¨‹ç»“æŸï¼›ä½†æ˜¾ç„¶ï¼Œè¿™æ ·çš„å®šä¹‰å¹¶ä¸æ¸…æ™°ã€‚ä¸ªäººè®¤ä¸ºâ€Java 7 Concurrency Cookbookâ€çš„å®šä¹‰è¾ƒä¸ºæ¸…æ™°ï¼š......  -->
        <p class="article-more-link">
          <a href="2018/05/04/ã€Javaã€‘Threadç±»ä¸­çš„join()æ–¹æ³•åŸç†/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/æºç åˆ†æ/">æºç åˆ†æ</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-ã€Androidã€‘Retrofitæºç åˆ†æ"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/04/10/ã€Androidã€‘Retrofitæºç åˆ†æ/">ã€Androidã€‘Retrofitæºç åˆ†æ</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/04/10/ã€Androidã€‘Retrofitæºç åˆ†æ/" class="article-date">
	  <time datetime="2018-04-10T14:20:55.000Z" itemprop="datePublished">2018-04-10</time>
	</a>

      
    <a class="article-category-link" href="categories/Android/">Android</a><a class="article-category-link" href="categories/Android/æºç åˆ†æ/">æºç åˆ†æ</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Retrofitç®€ä»‹"><a href="#Retrofitç®€ä»‹" class="headerlink" title="Retrofitç®€ä»‹"></a>Retrofitç®€ä»‹</h3><p><code>retrofit</code> n. å¼æ ·ç¿»æ–°ï¼ŒèŠ±æ ·ç¿»æ–°      vt. ç»™æœºå™¨è®¾å¤‡è£…é…ï¼ˆæ–°éƒ¨ä»¶ï¼‰ï¼Œç¿»æ–°ï¼Œæ”¹å‹</p>
<p><a href="http://square.github.io/retrofit/" target="_blank" rel="noopener"><strong>Retrofit</strong></a> æ˜¯ä¸€ä¸ª RESTful çš„ HTTP ç½‘ç»œè¯·æ±‚æ¡†æ¶çš„å°è£…ã€‚æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰è¯´å®ƒæ˜¯ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼Œä¸»è¦åŸå› åœ¨äºç½‘ç»œè¯·æ±‚çš„å·¥ä½œå¹¶ä¸æ˜¯ <code>Retrofit</code> æ¥å®Œæˆçš„ã€‚<code>Retrofit</code> 2.0 å¼€å§‹å†…ç½® <a href="http://square.github.io/okhttp/" target="_blank" rel="noopener"><code>OkHttp</code></a>ï¼Œå‰è€…ä¸“æ³¨äºæ¥å£çš„å°è£…ï¼Œåè€…ä¸“æ³¨äºçœŸæ­£çš„ç½‘ç»œè¯·æ±‚ã€‚å³é€šè¿‡ å¤§é‡çš„è®¾è®¡æ¨¡å¼ å°è£…äº† <code>OkHttp</code> ï¼Œä½¿å¾—ç®€æ´æ˜“ç”¨ã€‚</p>
<p><img src="/gallery/android_common/4182937778-57515297dacff_articlex.png" alt=""></p>
<p>æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé€šè¿‡ <code>Retrofit</code> è¯·æ±‚ç½‘ç»œï¼Œå®é™…ä¸Šæ˜¯ä½¿ç”¨ <code>Retrofit</code> æ¥å£å±‚å°è£…è¯·æ±‚å‚æ•°ã€Headerã€Url ç­‰ä¿¡æ¯ï¼Œä¹‹åç”± <code>OkHttp</code>å®Œæˆåç»­çš„è¯·æ±‚æ“ä½œï¼Œåœ¨æœåŠ¡ç«¯è¿”å›æ•°æ®ä¹‹åï¼Œ<code>OkHttp</code> å°†åŸå§‹çš„ç»“æœäº¤ç»™ <code>Retrofit</code>ï¼Œåè€…æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å¯¹ç»“æœè¿›è¡Œè§£æçš„è¿‡ç¨‹ã€‚Retrofitçš„å¤§æ¦‚åŸç†è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><code>Retrofit</code> å°† <code>Http</code>è¯·æ±‚ æŠ½è±¡ æˆ <code>Java</code>æ¥å£</li>
<li>åœ¨æ¥å£é‡Œç”¨ æ³¨è§£ æè¿°å’Œé…ç½® ç½‘ç»œè¯·æ±‚å‚æ•°</li>
<li>ç”¨åŠ¨æ€ä»£ç† çš„æ–¹å¼ï¼ŒåŠ¨æ€å°†ç½‘ç»œè¯·æ±‚æ¥å£çš„æ³¨è§£ è§£æ æˆ<code>HTTP</code>è¯·æ±‚</li>
<li>æœ€åæ‰§è¡Œ<code>HTTP</code>è¯·æ±‚</li>
</ol>
<p>è¿™ç¯‡æ–‡ç« æˆ‘å°†ä»Retrofitçš„åŸºæœ¬ç”¨æ³•å‡ºå‘ï¼ŒæŒ‰ç…§å…¶ä½¿ç”¨æ­¥éª¤ï¼Œä¸€æ­¥æ­¥çš„æ¢ç©¶Retrofitçš„å®ç°åŸç†åŠå…¶æºç çš„è®¾è®¡æ¨¡å¼ã€‚</p>
<p>Retrofit Github: <a href="https://github.com/square/retrofit">https://github.com/square/retrofit</a></p>
<h3 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h3><p>ä½¿ç”¨ <code>Retrofit</code> éå¸¸ç®€å•ï¼Œé¦–å…ˆéœ€è¦åœ¨ build.gradle ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'com.squareup.retrofit2:retrofit:2.4.0'</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦ä½¿ç”¨Gsonè§£æå™¨ï¼Œä¹Ÿéœ€è¦åœ¨build.gradleä¸­æ·»åŠ ä¾èµ–ï¼ˆåæ–‡ä¼šè¯¦ç»†è®²åˆ°Retrofitçš„Converterï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'com.squareup.retrofit2:converter-gson:2.0.2'</span></span><br></pre></td></tr></table></figure>
<h4 id="1-å®šä¹‰Interface"><a href="#1-å®šä¹‰Interface" class="headerlink" title="1. å®šä¹‰Interface"></a>1. å®šä¹‰Interface</h4><p>Retrofitä½¿ç”¨java interfaceå’Œæ³¨è§£æè¿°äº†HTTPè¯·æ±‚çš„APIå‚æ•°ï¼Œæ¯”å¦‚Githubçš„ä¸€ä¸ªAPIï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GitHubService</span> </span>&#123;</span><br><span class="line">  <span class="meta">@GET</span>(<span class="string">"users/&#123;user&#125;/repos"</span>)</span><br><span class="line">  Call&lt;List&lt;Repo&gt;&gt; listRepos(<span class="meta">@Path</span>(<span class="string">"user"</span>) String user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        <!-- Retrofitç®€ä»‹retrofit n. å¼æ ·ç¿»æ–°ï¼ŒèŠ±æ ·ç¿»æ–°      vt. ç»™æœºå™¨è®¾å¤‡è£…é…ï¼ˆæ–°éƒ¨ä»¶ï¼‰ï¼Œç¿»æ–°ï¼Œæ”¹å‹
Retrofit æ˜¯ä¸€ä¸ª RESTful çš„ HTTP ç½‘ç»œè¯·æ±‚æ¡†æ¶çš„å°è£…ã€‚æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰è¯´å®ƒæ˜¯ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼Œä¸»è¦åŸå› åœ¨äºç½‘ç»œè¯·æ±‚çš„å·¥ä½œå¹¶ä¸æ˜¯ Retrofit æ¥å®Œæˆçš„ã€‚Retrofit 2.0 å¼€å§‹å†…ç½® OkHttpï¼Œå‰è€…ä¸“æ³¨äºæ¥å£çš„å°è£…ï¼Œåè€…ä¸“æ³¨äºçœŸæ­£çš„ç½‘ç»œè¯·æ±‚ã€‚å³é€š......  -->
        <p class="article-more-link">
          <a href="2018/04/10/ã€Androidã€‘Retrofitæºç åˆ†æ/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/æºç åˆ†æ/">æºç åˆ†æ</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-ã€Androidã€‘Appåº”ç”¨å‰åå°åˆ‡æ¢çš„ä¸€ç§ç›‘å¬æ–¹æ³•"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="2018/04/06/ã€Androidã€‘Appåº”ç”¨å‰åå°åˆ‡æ¢çš„ä¸€ç§ç›‘å¬æ–¹æ³•/">ã€Androidã€‘Appåº”ç”¨å‰åå°åˆ‡æ¢çš„ä¸€ç§ç›‘å¬æ–¹æ³•</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="2018/04/06/ã€Androidã€‘Appåº”ç”¨å‰åå°åˆ‡æ¢çš„ä¸€ç§ç›‘å¬æ–¹æ³•/" class="article-date">
	  <time datetime="2018-04-06T04:20:55.000Z" itemprop="datePublished">2018-04-06</time>
	</a>

      
    <a class="article-category-link" href="categories/Android/">Android</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Androidæœ¬èº«å¹¶æ²¡æœ‰æä¾›ç›‘å¬Appçš„å‰åå°åˆ‡æ¢æ“ä½œçš„æ–¹æ³•ã€‚æœ€è¿‘çœ‹åˆ°ä¸€ç§ç®€å•å·§å¦™çš„æ–¹æ³•æ¥ç›‘å¬å‰åå°ï¼Œè¿™é‡Œåˆ†äº«è®°å½•ä¸€ä¸‹ã€‚</p>
<h3 id="ä¸€ã€Activityç”Ÿå‘½å‘¨æœŸ"><a href="#ä¸€ã€Activityç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä¸€ã€Activityç”Ÿå‘½å‘¨æœŸ"></a>ä¸€ã€Activityç”Ÿå‘½å‘¨æœŸ</h3><p>æˆ‘ä»¬çŸ¥é“åœ¨Androidä¸­ï¼Œä¸¤ä¸ªActivityï¼Œåˆ†åˆ«ä¸ºAå’ŒBã€‚å‡è®¾æ­¤æ—¶Aåœ¨å‰å°ï¼Œå½“Aå¯åŠ¨Bæ—¶ï¼Œä»–ä»¬ä¿©ä¹‹é—´çš„ç”Ÿå‘½å‘¨æœŸå…³ç³»å¦‚ä¸‹ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„è¿™ç¯‡æ–‡ç« <a href="https://blog.csdn.net/u010983881/article/details/50036647" target="_blank" rel="noopener">ã€Androidã€‘Activityä¸Fragmentçš„ç”Ÿå‘½å‘¨æœŸçš„å…³ç³»</a>ï¼š</p>
<blockquote>
<p>A.onPause()  -&gt;  B.onCreate()  -&gt;  <strong>B.onStart()</strong>  -&gt;  B.onResume()  -&gt;  <strong>A.onStop()</strong></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´Bçš„onStart()æ–¹æ³•æ˜¯åœ¨Açš„onStop()æ–¹æ³•ä¹‹å‰æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ç‚¹æ¥åšæ–‡ç« ã€‚<strong>åœ¨æ‰€æœ‰Activityçš„onStart()å’ŒonStop()æ–¹æ³•ä¸­è¿›è¡Œè®¡æ•°ï¼Œè®¡æ•°å˜é‡ä¸ºcountï¼Œåœ¨onStartä¸­å°†å˜é‡åŠ 1ï¼ŒonStopä¸­å‡1ã€‚</strong></p>
<p>é‚£ä¹ˆè¿™ä¸ªcountåœ¨æ•´ä¸ªAppçš„ç”Ÿå‘½å‘¨æœŸé‡Œçš„å€¼å°±ä¼šåƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count</span><br><span class="line">2|          _     _     _     _</span><br><span class="line">1|     ____| |___| |___| |___| |____</span><br><span class="line">0| ___|                             |___</span><br><span class="line"> ===========================================&gt; æ—¶é—´</span><br><span class="line">      a     b     c                 d</span><br></pre></td></tr></table></figure>
<p>æ¨ªè½´è¡¨ç¤ºæ—¶é—´ï¼Œçºµè½´è¡¨ç¤ºcountçš„å€¼ã€‚é‚£ä¹ˆaã€bã€cã€då››ä¸ªæ—¶é—´ç‚¹å‘ç”Ÿçš„äº‹æƒ…å¦‚ä¸‹ï¼š</p>
<ol>
<li>aç‚¹å°±æ˜¯å¯åŠ¨äº†åº”ç”¨ï¼›</li>
<li>bç‚¹æ˜¯<strong>Activity_A</strong>å¯åŠ¨äº†å¦ä¸€ä¸ª<strong>Activity_B</strong>ï¼›</li>
<li>cç‚¹æ˜¯<strong>Activity_B</strong>å¯åŠ¨äº†å¦ä¸€ä¸ª<strong>Activity_C</strong>ï¼Œåé¢ä»¥æ­¤ç±»æ¨ï¼›</li>
<li>dç‚¹æ˜¯åº”ç”¨åˆ‡æ¢åˆ°äº†åå°ï¼›</li>
</ol>
<p>ä»ä¸Šé¢çš„æƒ…å†µçœ‹å‡ºï¼Œå¯ä»¥é€šè¿‡å¯¹countè®¡æ•°ä¸º0ï¼Œæ¥åˆ¤æ–­åº”ç”¨è¢«ä»å‰å°åˆ‡åˆ°äº†åå°ã€‚åŒæ ·çš„ï¼Œä»åå°åˆ‡åˆ°å‰å°ä¹Ÿæ˜¯ç±»ä¼¼çš„é“ç†ã€‚å…·ä½“å®ç°çœ‹åé¢çš„ä»£ç ã€‚</p>
        <!-- Androidæœ¬èº«å¹¶æ²¡æœ‰æä¾›ç›‘å¬Appçš„å‰åå°åˆ‡æ¢æ“ä½œçš„æ–¹æ³•ã€‚æœ€è¿‘çœ‹åˆ°ä¸€ç§ç®€å•å·§å¦™çš„æ–¹æ³•æ¥ç›‘å¬å‰åå°ï¼Œè¿™é‡Œåˆ†äº«è®°å½•ä¸€ä¸‹ã€‚
ä¸€ã€Activityç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬çŸ¥é“åœ¨Androidä¸­ï¼Œä¸¤ä¸ªActivityï¼Œåˆ†åˆ«ä¸ºAå’ŒBã€‚å‡è®¾æ­¤æ—¶Aåœ¨å‰å°ï¼Œå½“Aå¯åŠ¨Bæ—¶ï¼Œä»–ä»¬ä¿©ä¹‹é—´çš„ç”Ÿå‘½å‘¨æœŸå…³ç³»å¦‚ä¸‹ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„è¿™ç¯‡æ–‡ç« ã€Androidã€‘Activityä¸Fragmentçš„ç”Ÿå‘½å‘¨æœŸçš„å…³ç³»ï¼š

A.onPause()......  -->
        <p class="article-more-link">
          <a href="2018/04/06/ã€Androidã€‘Appåº”ç”¨å‰åå°åˆ‡æ¢çš„ä¸€ç§ç›‘å¬æ–¹æ³•/#more">é˜…è¯»å…¨æ–‡</a>
        </p>
      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="page/2/">2</a><a class="page-number" href="page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="page/12/">12</a><a class="extend next" rel="next" href="page/2/">ä¸‹ä¸€é¡µ &raquo;</a>
  </nav>

</section>
        
      </div>
      
        <div align="center" style="margin-top: 30px;"><hr class="hr" style="margin:0px; height:3px;"></div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2018 iTimeTraveler All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				è®¿å®¢æ•° : <span id="busuanzi_value_site_uv"></span> |  
				è®¿é—®é‡ : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="index.html" class="mobile-nav-link">Home</a>
  
    <a href="archives" class="mobile-nav-link">Archives</a>
  
    <a href="categories" class="mobile-nav-link">Categories</a>
  
    <a href="tags" class="mobile-nav-link">Tags</a>
  
    <a href="funnysite" class="mobile-nav-link">é…·ç«™</a>
  
    <a href="collection" class="mobile-nav-link">æ”¶è—</a>
  
    <a href="about" class="mobile-nav-link">About</a>
  
    <a href="/mybooks" class="mobile-nav-link">ğŸ</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="fancybox/jquery.fancybox.css">
  <script src="fancybox/jquery.fancybox.pack.js"></script>


<script src="js/scripts.js"></script>


  <script src="js/home.js"></script>










	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">è®¾ç½®</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              æ­£æ–‡å­—å·å¤§å°
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            æ‚¨å·²è°ƒæ•´é¡µé¢å­—ä½“å¤§å°
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              å¤œé—´æŠ¤çœ¼æ¨¡å¼
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            å¤œé—´æ¨¡å¼å·²ç»å¼€å¯ï¼Œå†æ¬¡å•å‡»æŒ‰é’®å³å¯å…³é—­ 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å…³ äº&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            iTimeTraveler
          </div>
          <div class="panel-body">
            Copyright Â© 2018 Mr.Seven All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
</body>
</html>